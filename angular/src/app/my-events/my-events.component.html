<app-navbar></app-navbar>
<h1>Mine events</h1>
<mat-card>
    <mat-form-field id="search" color="primary">
        <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Søg">
    </mat-form-field>
  
  <div class="mat-elevation-z8">
      <button routerLink='/events' class="error" mat-button color="primary">{{error}}</button>
      <table *ngIf="!isMobile && events.length > 0" mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8">
  
          <!--- Note that these columns can be defined in any order.
                The actual rendered columns are set as a property on the row definition" -->
        
          <!-- Title Column -->
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Event </th>
            <td mat-cell *matCellDef="let element" (click)="onViewClick(element)"> {{element.name}} </td>
          </ng-container>
        
          <!-- City Column -->
          <ng-container matColumnDef="address">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> By </th>
            <td mat-cell *matCellDef="let element" (click)="onViewClick(element)">{{element.address.street}}, {{element.address.city}}, {{element.address.zip}}</td>
          </ng-container>
  
          <!-- Category Column -->
          <ng-container matColumnDef="category">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Kategori </th>
            <td mat-cell *matCellDef="let element" (click)="onViewClick(element)"> {{element.category}} </td>
          </ng-container>
        
          <!-- Distance Column -->
          <ng-container matColumnDef="distance">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Afstand </th>
            <td mat-cell *matCellDef="let element" (click)="onViewClick(element)"> {{10+10}} KM </td>
          </ng-container>
        
          <!-- Gender Column -->
          <ng-container matColumnDef="genderRatio">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Kønsfordeling </th>
            <td mat-cell *matCellDef="let element" (click)="onViewClick(element)"> {{element.genderRatio}} </td>
          </ng-container>
        
          <!-- Children Column -->
          <ng-container matColumnDef="targetGroup">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Børn </th>
            <td mat-cell *matCellDef="let element" (click)="onViewClick(element)"> {{element.targetGroup}} </td>
          </ng-container>
        
          <!-- Participants Column -->
          <ng-container matColumnDef="available">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Deltagere </th>
            <td mat-cell *matCellDef="let element" (click)="onViewClick(element)"> {{element.participantCount}} / {{element.maxGuests}} </td>
          </ng-container>

          <!-- Actions Column -->
          <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef mat-sort-header></th>
            <td mat-cell *matCellDef="let element" >
                <button (click)="onEditClick(element)" mat-button color="primary">Rediger</button>
                <button (click)="publishEvent(element)" mat-button color="primary">Publish</button>
                <button (click)="openDialog(element)" mat-button color="warn">Slet</button>
              </td>
          </ng-container>
        
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
  
      <table *ngIf="isMobile" mat-table [dataSource]="dataSourceMobile" matSort class="mat-elevation-z8">
  
            <!--- Note that these columns can be defined in any order.
                  The actual rendered columns are set as a property on the row definition" -->
          
            <!-- Title Column -->
            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> Event </th>
              <td mat-cell *matCellDef="let element"> {{element.name}} </td>
            </ng-container>
          
            <!-- City Column -->
            <ng-container matColumnDef="address">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> By </th>
              <td mat-cell *matCellDef="let element"> {{element.address}} </td>
            </ng-container>
          
            <!-- Participants Column -->
            <ng-container matColumnDef="available">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> Pladser </th>
              <td mat-cell *matCellDef="let element"> Ledig </td>
            </ng-container>

            <!-- Actions Column -->
          <ng-container matColumnDef="actions">
              <th mat-header-cell *matHeaderCellDef mat-sort-header></th>
              <td mat-cell *matCellDef="let element">
                  <button (click)="onEditClick(element)" routerLink="/my-event" mat-button color="primary">Rediger</button>
                  <button (click)="openDialog(element)" mat-button color="warn">Slet</button>
              </td>
            </ng-container>
          
            <tr mat-header-row *matHeaderRowDef="displayedColumnsMobile"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumnsMobile;"></tr>
        </table>
  
    <mat-paginator *ngIf="!isMobile" [pageSizeOptions]="[5, 10, 15, 20, 25]"></mat-paginator>
    <mat-paginator *ngIf="isMobile" [pageSizeOptions]="[5, 10, 15, 20, 25]"></mat-paginator>
    
  </div>
  
  <ngx-spinner
  bdColor = "rgba(51, 51, 51, 0.8)"
  size = "large"
  color = "#fff"
  type = "square-jelly-box"
  ></ngx-spinner>
  
  
</mat-card>
