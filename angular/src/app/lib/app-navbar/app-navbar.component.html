<nav class="navbar navbar-expand-md navbar-light bg-light fixed-top" *ngIf="user$ | async as user">

    <img class="menu-logo" src="/assets/images/Logo.png" routerLink='/events'>
  

    <button *ngIf="isMobile" routerLink='/my-profile' color="primary" mat-button> 
      <img class="rating-shield" src="{{metal}}">
      {{rating.toFixed(1)}}<mat-icon style="color: #ff7a00">star</mat-icon>
    </button>
    
    
    <div *ngIf="!isMobile" class="navbar-nav ml-auto">
      <button 
        *ngFor="let field of menuFields" 
        routerLink='{{field.link}}' 
        [color]="field.selected ? 'primary' : ''" 
        mat-raised-button
      >
        {{field.displayName | uppercase}}
      </button>
      
      <button 
        *ngIf="!isIE" 
        routerLink='/my-profile' 
        [color]="profileSelected ? 'primary' : ''" 
        mat-raised-button
      >
        <mat-icon *ngIf="!user.pictureUrl">person</mat-icon> 
        <div class="user-picture" [ngStyle]="{'background-image': 'url('+user.pictureUrl+')'}"></div>
        {{user.username | uppercase}}
        <img class="rating-shield" src="{{metal}}">
        {{rating.toFixed(1)}}<mat-icon style="color: #ff7a00">star</mat-icon>
      </button>

      <button *ngIf="isIE" routerLink="/my-profile" color="primary" mat-button>
        {{username | uppercase}}
        <img class="rating-shield" src="{{metal}}">
      </button>

    </div>
    
    <button *ngIf="isMobile" mat-icon-button [matMenuTriggerFor]="menu">
        <mat-icon>menu</mat-icon>
    </button>

      <mat-menu #menu="matMenu" [overlapTrigger]="false" yPosition="below">
        <button routerLink="/loggedin-dashboard" mat-menu-item>
          <mat-icon>dashboard</mat-icon>
          <span>Dashboard</span>
        </button>
        <button routerLink="/events" mat-menu-item>
          <mat-icon>calendar_today</mat-icon>
          <span>Events</span>
        </button>
        <button routerLink="/my-profile" mat-menu-item>
          <mat-icon>person</mat-icon>
          <span>Min Profil</span>
        </button>
        <button routerLink="/payment" mat-menu-item>
          <mat-icon>payment</mat-icon>
          <span>Betaling</span>
          </button>
      </mat-menu>
      
    <button (click)="signout()" mat-raised-button color="warn">Log ud</button>
    
    <div 
        #tooltip="matTooltip" 
        (click)="redirectToLink('https://myaccount.google.com/permissions')" 
        matTooltip="Hvis du er logget ind med en Google-konto og ønsker at logge fuldstændigt ud af SingleNetværket (f.eks. hvis du anvender en offentlig computer eller ønsker at logge ind med en anden Google-konto), tryk på denne knap, find SingleNetværket på den side der kommer frem og klik 'fjern adgang'/'remove access'."
        class="social-media-button google">
        <img src="./assets/images/social/google.png" alt="">
    </div>

  </nav>

  <!-- Pusher -->
  <!-- DO NOT EDIT HERE -->
  <nav style="visibility: hidden;" class="navbar navbar-expand-md navbar-light bg-light pusher">

      <a routerLink="/loggedin-dashboard"><button *ngIf="isMobile" class="btn btn-light">Tilbage</button></a>
      
      
      <div *ngIf="!isMobile" class="navbar-nav ml-auto">
        <button *ngFor="let field of menuFields" routerLink='{{field.link}}'  mat-button>{{field.displayName | uppercase}}</button>
      </div>
        
      <button (click)="signout()" mat-raised-button color="warn">Log ud</button>
        
    </nav>

  